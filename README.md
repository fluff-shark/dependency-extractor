TODOs:

1. Integration tests.
2. Streamline ownership... I've probably got lots of unnecessary copies.
3. Streamline import resolution. Recent versions of Node require file extensions. Babel/tsconfig/old versions don't. ATM the code has some sketchy rules which waffle between the two.